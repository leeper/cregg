<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Conjoint feature frequencies — cj_freqs • cregg</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Conjoint feature frequencies — cj_freqs" />
<meta property="og:description" content="Tabulate and visualize conjoint features, and their display frequencies and proportions" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cregg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">Introduction to cregg</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leeper/cregg">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conjoint feature frequencies</h1>
    <small class="dont-index">Source: <a href='https://github.com/leeper/cregg/blob/master/R/cj_freqs.R'><code>R/cj_freqs.R</code></a>, <a href='https://github.com/leeper/cregg/blob/master/R/cj_props.R'><code>R/cj_props.R</code></a>, <a href='https://github.com/leeper/cregg/blob/master/R/cj_table.R'><code>R/cj_table.R</code></a></small>
    <div class="hidden name"><code>cj_freqs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Tabulate and visualize conjoint features, and their display frequencies and proportions</p>
    </div>

    <pre class="usage"><span class='fu'>cj_freqs</span>(
  <span class='no'>data</span>,
  <span class='no'>formula</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>feature_order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>feature_labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>level_order</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"ascending"</span>, <span class='st'>"descending"</span>),
  <span class='no'>...</span>
)

<span class='fu'>cj_props</span>(<span class='no'>data</span>, <span class='no'>formula</span>, <span class='no'>id</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>margin</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>cj_table</span>(
  <span class='no'>data</span>,
  <span class='no'>formula</span>,
  <span class='kw'>feature_order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>feature_labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>level_order</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"ascending"</span>, <span class='st'>"descending"</span>),
  <span class='kw'>include_reference</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame containing variables specified in <code>formula</code>. All RHS variables should be factors; all levels across features should be unique.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>An RHS formula specifying conjoint features to tabulate. All RHS variables should be factors; all levels across features should be unique.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>An RHS formula specifying a variable holding respondent identifiers, to be used for clustering standard errors. By default, data are unclustered.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>An (optional) RHS formula specifying a variable holding survey weights.</p></td>
    </tr>
    <tr>
      <th>feature_order</th>
      <td><p>An (optional) character vector specifying the names of feature (RHS) variables in the order they should be encoded in the resulting data frame.</p></td>
    </tr>
    <tr>
      <th>feature_labels</th>
      <td><p>A named list of &#8220;fancy&#8221; feature labels to be used in output. By default, the function looks for a &#8220;label&#8221; attribute on each variable in <code>formula</code> and uses that for pretty printing. This argument overrides those attributes or otherwise provides fancy labels for this purpose. This should be a list with names equal to variables on the righthand side of <code>formula</code> and character string values; arguments passed here override variable attributes.</p></td>
    </tr>
    <tr>
      <th>level_order</th>
      <td><p>A character string specifying levels (within each feature) should be ordered increasing or decreasing in the final output. This is mostly only consequential for plotting via <code><a href='plot.html'>plot.cj_mm</a></code>, etc.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Ignored.</p></td>
    </tr>
    <tr>
      <th>margin</th>
      <td><p>A numeric value passed to <code><a href='https://rdrr.io/r/base/prop.table.html'>prop.table</a></code>. If <code>NULL</code> overall proportions are calculated.</p></td>
    </tr>
    <tr>
      <th>include_reference</th>
      <td><p>A logical indicating whether to include a &#8220;reference&#8221; column that indicates whether a feature level is the reference category for that feature. Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame of class &#8220;cj_freqs&#8221;, &#8220;cj_props&#8221;, etc.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These functions provide related but slightly different functionality. <code>cj_table</code> simply creates a data frame of features and their levels, which is useful for printing. <code>cj_props</code> provides tidy proportion tables to examine cross-feature restrictions in conjoint designs that are not equally randomized. This enables, for example, tabulation and visualization of complete restrictions (where combinations of two or more features are not permitted), as well as calculation of AMCEs for constrained designs appropriately weighted by the display proportions for particular combinations of features.</p>
<p><code>cj_freqs</code> provides <em>marginal</em> display frequencies, which are a descriptive check on the presentation of individual conjoint features (for example, to ensure equal or intentionally unequal appearance of levels). This is mostly useful for plotting functionality provided in <code><a href='plot.html'>plot.cj_freqs</a></code>, which provides barcharts for the frequency with which each level of each feature was presented.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='plot.html'>plot.cj_mm</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>immigration</span>)
<span class='co'># identify all levels</span>
<span class='fu'>cj_table</span>(<span class='no'>immigration</span>, ~ <span class='no'>Gender</span> + <span class='no'>Education</span> + <span class='no'>LanguageSkills</span>)</div><div class='output co'>#&gt;                   feature                    level
#&gt; 1                  Gender                   Female
#&gt; 2                  Gender                     Male
#&gt; 3  Educational Attainment                No Formal
#&gt; 4  Educational Attainment                4th Grade
#&gt; 5  Educational Attainment                8th Grade
#&gt; 6  Educational Attainment              High School
#&gt; 7  Educational Attainment         Two-Year College
#&gt; 8  Educational Attainment           College Degree
#&gt; 9  Educational Attainment          Graduate Degree
#&gt; 10        Language Skills           Fluent English
#&gt; 11        Language Skills           Broken English
#&gt; 12        Language Skills Tried English but Unable
#&gt; 13        Language Skills         Used Interpreter</div><div class='input'><span class='fu'>cj_table</span>(<span class='no'>immigration</span>, ~ <span class='no'>Gender</span> + <span class='no'>Education</span> + <span class='no'>LanguageSkills</span>, <span class='kw'>include_ref</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;                   feature                    level reference
#&gt; 1                  Gender                   Female      TRUE
#&gt; 2                  Gender                     Male     FALSE
#&gt; 3  Educational Attainment                No Formal      TRUE
#&gt; 4  Educational Attainment                4th Grade     FALSE
#&gt; 5  Educational Attainment                8th Grade     FALSE
#&gt; 6  Educational Attainment              High School     FALSE
#&gt; 7  Educational Attainment         Two-Year College     FALSE
#&gt; 8  Educational Attainment           College Degree     FALSE
#&gt; 9  Educational Attainment          Graduate Degree     FALSE
#&gt; 10        Language Skills           Fluent English      TRUE
#&gt; 11        Language Skills           Broken English     FALSE
#&gt; 12        Language Skills Tried English but Unable     FALSE
#&gt; 13        Language Skills         Used Interpreter     FALSE</div><div class='input'>
<span class='co'># display frequencies</span>
(<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'>cj_freqs</span>(<span class='no'>immigration</span>, ~ <span class='no'>Gender</span> + <span class='no'>Education</span> + <span class='no'>LanguageSkills</span>, <span class='kw'>id</span> <span class='kw'>=</span> ~ <span class='no'>CaseID</span>))</div><div class='output co'>#&gt;      statistic                feature                    level estimate
#&gt; 1  frequencies                 Gender                   Female     7130
#&gt; 2  frequencies                 Gender                     Male     6830
#&gt; 3  frequencies Educational Attainment                No Formal     1964
#&gt; 4  frequencies Educational Attainment                4th Grade     2018
#&gt; 5  frequencies Educational Attainment                8th Grade     1998
#&gt; 6  frequencies Educational Attainment              High School     1994
#&gt; 7  frequencies Educational Attainment         Two-Year College     2005
#&gt; 8  frequencies Educational Attainment           College Degree     1963
#&gt; 9  frequencies Educational Attainment          Graduate Degree     2018
#&gt; 10 frequencies        Language Skills           Fluent English     3576
#&gt; 11 frequencies        Language Skills           Broken English     3440
#&gt; 12 frequencies        Language Skills Tried English but Unable     3501
#&gt; 13 frequencies        Language Skills         Used Interpreter     3443</div><div class='input'>
<span class='co'># restrictions</span>
<span class='co'>## check display proportions</span>
<span class='fu'>cj_props</span>(<span class='no'>immigration</span>, ~ <span class='no'>Job</span>, <span class='kw'>id</span> <span class='kw'>=</span> ~ <span class='no'>CaseID</span>)</div><div class='output co'>#&gt;                    Job Proportion
#&gt; 1              Janitor 0.11697708
#&gt; 2               Waiter 0.12335244
#&gt; 3  Child Care Provider 0.12578797
#&gt; 4             Gardener 0.11833811
#&gt; 5    Financial Analyst 0.03488539
#&gt; 6  Construction Worker 0.11876791
#&gt; 7              Teacher 0.12098854
#&gt; 8  Computer Programmer 0.03882521
#&gt; 9                Nurse 0.12399713
#&gt; 10  Research Scientist 0.03868195
#&gt; 11              Doctor 0.03939828</div><div class='input'><span class='co'>## check which combinations were not allowed</span>
<span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span>(<span class='fu'>cj_props</span>(<span class='no'>immigration</span>, ~ <span class='no'>Job</span> + <span class='no'>Education</span>, <span class='kw'>id</span> <span class='kw'>=</span> ~ <span class='no'>CaseID</span>), <span class='no'>Proportion</span> <span class='kw'>==</span> <span class='fl'>0</span>)</div><div class='output co'>#&gt;                    Job   Education Proportion
#&gt; 5    Financial Analyst   No Formal          0
#&gt; 8  Computer Programmer   No Formal          0
#&gt; 10  Research Scientist   No Formal          0
#&gt; 11              Doctor   No Formal          0
#&gt; 16   Financial Analyst   4th Grade          0
#&gt; 19 Computer Programmer   4th Grade          0
#&gt; 21  Research Scientist   4th Grade          0
#&gt; 22              Doctor   4th Grade          0
#&gt; 27   Financial Analyst   8th Grade          0
#&gt; 30 Computer Programmer   8th Grade          0
#&gt; 32  Research Scientist   8th Grade          0
#&gt; 33              Doctor   8th Grade          0
#&gt; 38   Financial Analyst High School          0
#&gt; 41 Computer Programmer High School          0
#&gt; 43  Research Scientist High School          0
#&gt; 44              Doctor High School          0</div><div class='input'>
<span class='co'># \donttest{</span>
<span class='co'># plotting</span>
(<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>f</span>))</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 3 rows containing missing values (position_stack).</span></div><div class='img'><img src='cj_freqs-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## change ggplot2 theme</span>
<span class='no'>p</span> + <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_bw</a></span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 3 rows containing missing values (position_stack).</span></div><div class='img'><img src='cj_freqs-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## monochrome bars</span>
<span class='no'>p</span> + <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span>(<span class='kw'>values</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"black"</span>, <span class='fl'>9</span>)) +
  <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span>(<span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"none"</span>)</div><div class='output co'>#&gt; <span class='message'>Scale for 'fill' is already present. Adding another scale for 'fill', which</span>
#&gt; <span class='message'>will replace the existing scale.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 3 rows containing missing values (position_stack).</span></div><div class='img'><img src='cj_freqs-3.png' alt='' width='700' height='433' /></div><div class='input'># }
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Thomas J. Leeper.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


